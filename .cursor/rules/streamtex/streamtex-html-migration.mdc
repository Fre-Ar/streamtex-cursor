---
alwaysApply: false
---

# StreamTeX HTML Migration Workflow

## 0. Strict Compliance (Read First)
**CRITICAL:** This workflow guides the *analysis* of HTML inputs. The *code generation* phase MUST strictly follow `.cursor/rules/streamtex/streamtex-development.mdc`.
- **Inherit all rules:** No raw HTML strings, use `sx` functions, strict imports.
- **Inherit Styling:** Use generic style names (English) and dark-mode friendly colors as defined in the Core Guidelines.

## 1. Context
This workflow applies when the user provides raw, cluttered HTML (e.g., Google Docs export) to convert into a StreamTeX block.

## 2. Analysis Phase (Internal Monologue)
1.  **Filter Noise:** Ignore non-descriptive classes (`c1`, `c12`). Look at the *computed* style (bold, centered, blue).
2.  **Identify Containers:**
    - Invisible tables used for alignment -> Map to `sx.st_grid()`.
    - Actual data tables -> Map to `sx.st_table()`.
    - Manual bullet points -> Map to `sx.st_list()`.
3.  **Style Consolidation:**
    - Identify repeating patterns (e.g., "11pt Arial Black").
    - Create **ONE** generic style in `BlockStyles` (e.g., `s.text.header_standard`) instead of copying `c1`, `c2`, `c3`.

## 3. Implementation Steps
1.  **Setup:** Create the file with the **Mandatory Imports** from `streamtex-development.mdc`.
2.  **Styles:** Define the consolidated `BlockStyles` class.
    - *Constraint:* Do not use IDs for style differentiation if definitions are identical.
3.  **Structure:** Write the `html_block()` function.
4.  **Content:** Extract text/images and wrap them in `sx` functions.
    - *Refactoring:* Replace `<br>` tags with `sx.st_br()`.

## 4. Migration Checklist
- [ ] Did I remove all raw HTML strings?
- [ ] Did I replace "c1/c2" classes with semantic names?
- [ ] Did I use `sx.st_list` instead of hardcoded bullets?
- [ ] Did I use `sx.st_br()` for line breaks to match the layout?
